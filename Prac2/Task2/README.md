Цель работы

Реализовать основную логику получения данных о зависимостях пакетов в формате Ubuntu APT,
для их последующего анализа и визуализации.
Запрещено применять готовые менеджеры пакетов (apt, dpkg, python-apt) и сторонние библиотеки —
используется только стандартная библиотека Python.

#---------------------------------------

Задачи этапа:
1) Использовать формат пакетов Ubuntu (APT).
2) Получить информацию для заданной пользователем версии пакета.
3) Извлечь прямые зависимости из URL-адреса или локального файла.
4) Вывести на экран все прямые зависимости заданного пакета.
5) Сохранить результат в репозитории с коммитом.

#---------------------------------------

Новые команды на 2 этапе:

| Команда                              | Назначение                                                                    |
| ------------------------------------ | ----------------------------------------------------------------------------- |
| `from urllib.request import urlopen` | чтение данных из APT-репозитория по URL                                       |
| `gzip.decompress()`                  | распаковка файла `Packages.gz` из репозитория                                 |
| `re.search()`                        | поиск нужных секций (`Package:`, `Version:`, `Depends:`) в тексте формата APT |
| `split(",")`                         | разделение строки зависимостей                                                |
| `sys.exit(1)`                        | завершение программы при ошибке                                               |
| `open(..., "r", encoding="utf-8")`   | чтение локального файла с информацией о пакетах                               |

#---------------------------------------

Реализация

Программа написана на Python 3.13 с использованием стандартных библиотек:
argparse — обработка аргументов командной строки;
urllib.request — получение данных по HTTP без менеджеров пакетов;
gzip — распаковка .gz файлов APT-репозиториев;
re — поиск зависимостей в тексте Packages-файла;
sys — завершение программы при ошибках.

Файл: stage2.py; Packages.txt


#---------------------------------------

Пример 1 — Тест для Ubuntu (онлайн)
Команда в терминале: python3 stage2.py --package jq --version 1.6 --repo http://archive.ubuntu.com/ubuntu

Вывод программы:
=== Сбор данных о зависимостях ===
Пакет: jq
Версия: 1.6
Источник данных: http://archive.ubuntu.com/ubuntu
(Автоматически добавлен путь к Packages: http://archive.ubuntu.com/ubuntu/dists/jammy/main/binary-amd64/Packages)
Packages не найден, пробуем http://archive.ubuntu.com/ubuntu/dists/jammy/main/binary-amd64/Packages.gz

Прямые зависимости (APT формат):
 - libc6
 - libjq1
 - libonig5

Этап 2 успешно выполнен

#---------------------------------------

Пример 2 - Тест с локальным файлом
Команда в терминале: python3 stage2.py --package jq --version 1.6 --repo Packages1

=== Сбор данных о зависимостях ===
Пакет: jq
Версия: 1.6
Источник данных: Packages.txt

Прямые зависимости (APT формат):
 - libc6
 - libjq1
 - libonig5

Этап 2 успешно выполнен

#---------------------------------------

Проверка ошибок:
1) Неверный формат версии:
python3 stage2.py --package jq --version one.six --repo Packages.txt
Вывод --> Неверный формат версии (--version). Пример: 6.2 или 1.0.3.

2) Отсутствующий файл:
python3 stage2.py --package jq --version 1.6 --repo missing-Packages
Вывод --> Ошибка: указанный локальный файл не найден.

3) Пакет не найден:
python3 stage2.py --package vim --version 9.0 --repo Packages.txt
Вывод --> Пакет 'vim' версии 9.0 не найден в Packages.

#---------------------------------------

Вывод по работе:

На втором этапе реализована базовая логика анализа зависимостей пакетов в формате Ubuntu APT.
Программа позволяет:
1) загружать данные из локального файла или репозитория Ubuntu;
2) автоматически обрабатывать Packages и Packages.gz;
3) выделять секции конкретного пакета и извлекать список его зависимостей;
4) обрабатывать все виды ошибок ввода-вывода;
5) работать полностью на стандартных библиотеках Python — без менеджеров пакетов.
