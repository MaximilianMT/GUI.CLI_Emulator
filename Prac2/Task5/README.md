Цель работы: создать визуализацию графа зависимостей на основе данных из файла test_graph.txt
в формате Mermaid, продемонстрировать корректную обработку циклических и линейных связей,
а также сравнить результат с эталонным менеджером пакетов.

Эталонный менеджер пакетов — это условный «правильный» инструмент (например, APT или NPM),
который задаёт стандартный порядок загрузки зависимостей.
В рамках данной работы его функция моделируется вручную с помощью заранее определённого графа (reference_mermaid),
который используется для сравнения результатов визуализации.
Расхождения между эталонным и построенным графом объясняются особенностями алгоритма DFS и наличием циклов.

Задачи этапа

1) Считать структуру зависимостей из файла test_graph.txt.
2) Сгенерировать граф зависимостей в формате Mermaid.
3) Построить визуализацию для трёх пакетов различной сложности:
Сложный граф с циклом (G → B);
Простой двухуровневый граф без циклов;
Линейный граф с глубиной 3.
4) Сравнить результаты с эталонным менеджером пакетов и объяснить расхождения.
5) Сохранить и оформить результаты работы.

Реализация программы
Файл программы: stage5_visualization.py
Язык: Python 3.13
Используемые библиотеки: argparse (стандартная)

Команда для запуска --> python3 stage5_visualization.py --repo test_graph.txt --test

Структура файла test_graph.txt:
# 1) Сложный граф с циклом (G → B)
A: B, C
B: D, E
C: F
D: G
E:
F:
G: B

# 2) Простой двухуровневый граф без циклов
H: I, J
I: K
J: L, M
K:
L:
M:

# 3) Линейный граф с глубиной 3
X: Y, Z
Y:
Z: W
W:

Пояснения к графам визуализации
1) Сложный граф с циклом (G → B)
1 Отражает наличие циклической зависимости между пакетами G и B.
2 Используется для проверки корректной обработки рекурсивных связей в графе.
3 Цикл показан стрелками D → G → B, которые замыкают путь.
4 На визуализации видно, что A зависит от B и C, а B — от D, E;
5 при этом G снова указывает на B, образуя цикл.

2) Простой двухуровневый граф без циклов
1 Показывает иерархическую структуру без циклов.
2 Главный узел H имеет зависимости I и J.
3 У I — одна зависимость (K),
4 у J — две (L, M).
5 Такая структура демонстрирует стандартную схему, где каждый пакет имеет чёткое поддерево зависимостей.

3) Линейный граф с глубиной 3
1 Представляет собой цепочку зависимостей без ветвлений.
2 X зависит от Z, Z от W, и Y параллельно зависит напрямую от X.
3 Используется для проверки корректного отображения линейной глубины анализа.
4 На визуализации — это последовательность узлов, связанных одной линией.

В ходе выполнения Этапа 5:
1) Реализована генерация визуализаций в формате Mermaid;
2) Продемонстрированы три типа графов (циклический, иерархический и линейный);
3) Добавлено сравнение с эталонным менеджером пакетов;
4) Расхождения в порядке связей объяснены особенностями DFS-обхода;
5) Программа корректно завершает работу и выводит понятные графические схемы.
